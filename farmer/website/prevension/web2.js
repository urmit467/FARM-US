const suggestion = [
    {
        "states": [
            {
                "name": "Maharashtra",
                "seasons": [
                    {
                        "name": "zaid",
                        "crops": [
                            {
                                "name": "Moong Dal",
                                "price_per_acre": 8000,
                                "image_link": "https://kj1bcdn.b-cdn.net/media/64313/green-gram-production.jpg"
                            },
                            {
                                "name": "Cucumber",
                                "price_per_acre": 12000,
                                "image_link": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/ARS_cucumber.jpg/500px-ARS_cucumber.jpg"
                            },
                            {
                                "name": "Watermelon",
                                "price_per_acre": 15000,
                                "image_link": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Taiwan_2009_Tainan_City_Organic_Farm_Watermelon_FRD_7962.jpg/500px-Taiwan_2009_Tainan_City_Organic_Farm_Watermelon_FRD_7962.jpg"
                            }
                        ]
                    },
                    {
                        "name": "rabi",
                        "crops": [
                            {
                                "name": "Chickpea",
                                "price_per_acre": 10000,
                                "image_link": "https://www.agmrc.org/media/cms/chickpeas_09DBA84C4A9B2.jpg"
                            },
                            {
                                "name": "Wheat",
                                "price_per_acre": 14000,
                                "image_link": "https://images.indianexpress.com/2022/08/wheat-production-express-archive-1200.jpeg?w=640"
                            },
                            {
                                "name": "Mustard",
                                "price_per_acre": 11000,
                                "image_link": "https://bsmedia.business-standard.com/_media/bs/img/article/2017-12/10/full/1512906459-9943.jpg?im=FitAndFill=(826,465)"
                            }
                        ]
                    },
                    {
                        "name": "kharif",
                        "crops": [
                            {
                                "name": "Soybean",
                                "price_per_acre": 9000,
                                "image_link": "https://img.etimg.com/thumb/msid-114240715,width-300,height-225,imgsize-118280,resizemode-75/soyabean.jpg"
                            },
                            {
                                "name": "Rice",
                                "price_per_acre": 13000,
                                "image_link": "https://i.unu.edu/media/ourworld.unu.edu-en/article/5379/SRI-hybrid-rice-field.jpg"
                            },
                            {
                                "name": "Groundnut",
                                "price_per_acre": 16000,
                                "image_link": "https://www.zettafarms.com/wp-content/uploads/2024/01/blog-3.jpg"
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Gujrat",
                "seasons": [
                    {
                        "name": "zaid",
                        "crops": [
                            {
                                "name": "Bottle Gourd",
                                "price_per_acre": 11000,
                                "image_link": "https://example.com/images/bottlegourd.jpg"
                            },
                            {
                                "name": "Cowpea",
                                "price_per_acre": 8500,
                                "image_link": "https://example.com/images/cowpea.jpg"
                            },
                            {
                                "name": "Muskmelon",
                                "price_per_acre": 14500,
                                "image_link": "https://example.com/images/muskmelon.jpg"
                            }
                        ]
                    },
                    {
                        "name": "rabi",
                        "crops": [
                            {
                                "name": "Barley",
                                "price_per_acre": 9500,
                                "image_link": "https://example.com/images/barley.jpg"
                            },
                            {
                                "name": "Cumin",
                                "price_per_acre": 18000,
                                "image_link": "https://example.com/images/cumin.jpg"
                            },
                            {
                                "name": "Fenugreek",
                                "price_per_acre": 12500,
                                "image_link": "https://example.com/images/fenugreek.jpg"
                            }
                        ]
                    },
                    {
                        "name": "kharif",
                        "crops": [
                            {
                                "name": "Bajra",
                                "price_per_acre": 7500,
                                "image_link": "https://example.com/images/bajra.jpg"
                            },
                            {
                                "name": "Cotton",
                                "price_per_acre": 17000,
                                "image_link": "https://example.com/images/cotton.jpg"
                            },
                            {
                                "name": "Sesame",
                                "price_per_acre": 14000,
                                "image_link": "https://example.com/images/sesame.jpg"
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Andhra Pradesh",
                "seasons": [
                    {
                        "name": "zaid",
                        "crops": [
                            {
                                "name": "Bitter Gourd",
                                "price_per_acre": 13500,
                                "image_link": "https://example.com/images/bittergourd.jpg"
                            },
                            {
                                "name": "Cluster Beans",
                                "price_per_acre": 9000,
                                "image_link": "https://example.com/images/clusterbeans.jpg"
                            },
                            {
                                "name": "Pumpkin",
                                "price_per_acre": 11500,
                                "image_link": "https://example.com/images/pumpkin.jpg"
                            }
                        ]
                    },
                    {
                        "name": "rabi",
                        "crops": [
                            {
                                "name": "Sunflower",
                                "price_per_acre": 12500,
                                "image_link": "https://example.com/images/sunflower.jpg"
                            },
                            {
                                "name": "Lentil",
                                "price_per_acre": 10500,
                                "image_link": "https://example.com/images/lentil.jpg"
                            },
                            {
                                "name": "Coriander",
                                "price_per_acre": 15500,
                                "image_link": "https://example.com/images/coriander.jpg"
                            }
                        ]
                    },
                    {
                        "name": "kharif",
                        "crops": [
                            {
                                "name": "Red Gram",
                                "price_per_acre": 9500,
                                "image_link": "https://example.com/images/redgram.jpg"
                            },
                            {
                                "name": "Maize",
                                "price_per_acre": 11000,
                                "image_link": "https://example.com/images/maize.jpg"
                            },
                            {
                                "name": "Jowar",
                                "price_per_acre": 8000,
                                "image_link": "https://example.com/images/jowar.jpg"
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Karnataka",
                "seasons": [
                    {
                        "name": "zaid",
                        "crops": [
                            {
                                "name": "Ridge Gourd",
                                "price_per_acre": 12000,
                                "image_link": "https://example.com/images/ridgegourd.jpg"
                            },
                            {
                                "name": "Green Chilli",
                                "price_per_acre": 18500,
                                "image_link": "https://example.com/images/greenchilli.jpg"
                            },
                            {
                                "name": "Okra",
                                "price_per_acre": 14000,
                                "image_link": "https://example.com/images/okra.jpg"
                            }
                        ]
                    },
                    {
                        "name": "rabi",
                        "crops": [
                            {
                                "name": "Safflower",
                                "price_per_acre": 11500,
                                "image_link": "https://example.com/images/safflower.jpg"
                            },
                            {
                                "name": "Onion",
                                "price_per_acre": 16500,
                                "image_link": "https://example.com/images/onion.jpg"
                            },
                            {
                                "name": "Garlic",
                                "price_per_acre": 19500,
                                "image_link": "https://example.com/images/garlic.jpg"
                            }
                        ]
                    },
                    {
                        "name": "kharif",
                        "crops": [
                            {
                                "name": "Finger Millet",
                                "price_per_acre": 8500,
                                "image_link": "https://example.com/images/fingermillet.jpg"
                            },
                            {
                                "name": "Horse Gram",
                                "price_per_acre": 7500,
                                "image_link": "https://example.com/images/horsegram.jpg"
                            },
                            {
                                "name": "Black Gram",
                                "price_per_acre": 9500,
                                "image_link": "https://example.com/images/blackgram.jpg"
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Punjab",
                "seasons": [
                    {
                        "name": "zaid",
                        "crops": [
                            {
                                "name": "Bush Bean",
                                "price_per_acre": 11000,
                                "image_link": "https://example.com/images/bushbean.jpg"
                            },
                            {
                                "name": "Cantaloupe",
                                "price_per_acre": 16000,
                                "image_link": "https://example.com/images/cantaloupe.jpg"
                            },
                            {
                                "name": "Sweet Corn",
                                "price_per_acre": 14500,
                                "image_link": "https://example.com/images/sweetcorn.jpg"
                            }
                        ]
                    },
                    {
                        "name": "rabi",
                        "crops": [
                            {
                                "name": "Potato",
                                "price_per_acre": 22000,
                                "image_link": "https://example.com/images/potato.jpg"
                            },
                            {
                                "name": "Oats",
                                "price_per_acre": 10500,
                                "image_link": "https://example.com/images/oats.jpg"
                            },
                            {
                                "name": "Peas",
                                "price_per_acre": 17500,
                                "image_link": "https://example.com/images/peas.jpg"
                            }
                        ]
                    },
                    {
                        "name": "kharif",
                        "crops": [
                            {
                                "name": "Basmati Rice",
                                "price_per_acre": 21000,
                                "image_link": "https://example.com/images/basmatirice.jpg"
                            },
                            {
                                "name": "Sorghum",
                                "price_per_acre": 9500,
                                "image_link": "https://example.com/images/sorghum.jpg"
                            },
                            {
                                "name": "Mung Bean",
                                "price_per_acre": 12500,
                                "image_link": "https://example.com/images/mungbean.jpg"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]

btn.addEventListener("click", function () {
    const box = document.getElementById("box");

    // Get input values
    const stateInput = document.getElementById("state").value;
    const seasonInput = document.getElementById("season").value;
    const areaInput = Number(document.getElementById("area").value);
    const budgetInput = Number(document.getElementById("budget").value);

    // Validation
    if (!stateInput || !seasonInput || isNaN(areaInput) || isNaN(budgetInput)) {
        alert("fill the req areas")
        return;
    }
    box.innerHTML = "";
    box.style.background = "none";
    
    setTimeout(() => {
        // Find matching state
        let matchedState = null;
        for (const stateGroup of suggestion) {
            for (const state of stateGroup.states) {
                if (state.name === stateInput) {
                    matchedState = state;
                    break;
                }
            }
            if (matchedState) break;
        }

        if (!matchedState) {
            box.innerHTML = "State not found!";
            return;
        }

        // Find matching season
        let matchedSeason = null;
        for (const season of matchedState.seasons) {
            if (season.name === seasonInput) {
                matchedSeason = season;
                break;
            }
        }

        if (!matchedSeason) {
            box.innerHTML = "Season not found for this state!";
            return;
        }

        // Find affordable crops
        const affordableCrops = [];
        for (const crop of matchedSeason.crops) {
            const totalCost = (crop.price_per_acre * areaInput) + (areaInput * 1000);
            if (totalCost <= budgetInput) {
                affordableCrops.push({
                    name: crop.name,
                    totalCost,
                    image: crop.image_link
                });
            }
        }

        // Display results
        box.style.color = "gray";
        box.style.width = "500px";
        box.style.textAlign = "center";
        box.style.fontSize = "24px";
        box.style.padding = "20px";

        if (affordableCrops.length === 0) {
            box.innerHTML = "<p>No crops found within your budget!</p>";
        } else {
            box.innerHTML = `<h1 style="color:white; margin-top:250px">Recommended crops:</h1>`;
            let resultsHTML = '';
            affordableCrops.forEach(crop => {
                resultsHTML += `
                    <div style="background-color:white; margin:20px; padding:10px; border:1px solid #ddd; border-radius:5px; width:300px;
                                transition: all 0.3s ease; position: relative; top: 0;"
                         onmouseover="this.style.top='-10px'"
                         onmouseout="this.style.top='0'">
                        <img src="${crop.image}" alt="${crop.name}" style="width:275px; height:250px; object-fit:cover;">
                        <h3>${crop.name}</h3>
                        <p>Total Cost: â‚¹${crop.totalCost.toLocaleString()}</p>
                    </div>
                `;
            });

            const page3 = document.getElementById("page3");
            page3.style.height = "500px";
            page3.style.width = "1500px"
            page3.style.paddingTop = "100px";
            page3.style.display = "flex";
            page3.style.gap = "50px"
            page3.style.paddingLeft="100px";
            page3.style.alignContent="center"
            page3.style.color="black"

            page3.innerHTML = resultsHTML;
        
            const page4 = document.getElementById("page4");
           
            page4.style.height = "500px"
            page4.style.width = "1500px"
            page4.style.paddingTop = "30px"
            page4.style.display = "flex"

            page4.innerHTML = `<div style="height:300px; width:500px; margin-left:30px; background-color:white; box-shadow: rgba(240, 46, 170, 0.4) -5px 5px, rgba(240, 46, 170, 0.3) -10px 10px, rgba(240, 46, 170, 0.2) -15px 15px, rgba(240, 46, 170, 0.1) -20px 20px, rgba(240, 46, 170, 0.05) -25px 25px; padding:30px">
            <p style="color:black; text-align:-webkit-center;font-size:25px;  ">The Pradhan Mantri Fasal Bima Yojana (PMFBY)</p>
                            <p style="color:black">  a government scheme that provides crop insurance to farmers in India. It aims to protect farmers from losses due to natural calamities like drought, flood, hail, and pests. The scheme offers comprehensive coverage, including yield losses, prevented sowing, post-harvest losses, and localized calamities.
                            <a style="color:blue; text-decoration:none;" href="https://pmfby.gov.in/">>>></a></p>
                            </div>
                            <div style="height:300px; width:500px; margin-left:50px; background-color:white; box-shadow: rgba(240, 46, 170, 0.4) 0px 5px, rgba(240, 46, 170, 0.3) 0px 10px, rgba(240, 46, 170, 0.2) 0px 15px, rgba(240, 46, 170, 0.1) 0px 20px, rgba(240, 46, 170, 0.05) 0px 25px; padding:30px">
            <p style="color:black; text-align:-webkit-center;font-size:25px;  ">Schemes for Welfare of Farmers</p>
                            <p style="color:black"> Details of schemes being run by Department of Agriculture and Farmers' Welfare for welfare/increasing incomes of farmers and the achievements made therein, scheme-wise   <a style="color:blue; text-decoration:none;" href="https://www.pib.gov.in/PressReleaseIframePage.aspx?PRID=2002012">>>></a></p>
                            </div>
                             <div style="height:300px; width:500px; margin-left:50px; background-color:white;  box-shadow: rgba(240, 46, 170, 0.4) 5px 5px, rgba(240, 46, 170, 0.3) 10px 10px, rgba(240, 46, 170, 0.2) 15px 15px, rgba(240, 46, 170, 0.1) 20px 20px, rgba(240, 46, 170, 0.05) 25px 25px; padding:30px">
            <p style="color:black; text-align:-webkit-center;font-size:25px;  ">Private crop insurance</p>
                            <p style="color:black"> offered by various insurance companies to protect farmers from crop losses due to natural disasters or other unforeseen events. These schemes often complement government-sponsored schemes like Pradhan Mantri Fasal Bima Yojana (PMFBY). Private companies like Bajaj Allianz, ICICI Lombard, and Reliance General Insurance offer crop insurance policies. <a style="color:blue; text-decoration:none;"  href="private_crop.pdf" target=blank;>>>></a></p>  
                            </div>`;
        }

    }, 1000);
});